import{a as s}from"./chunk-FNBBRMD2.js";import{c as E,e as M,f as P,g as w,h as y,j as N,k as a,m as _}from"./chunk-5VOQH7J3.js";import{Ba as v,Ca as n,Ga as p,Pa as C,Qa as b,T as i,Xa as I,Ya as A,Za as S,_a as R,ba as u,db as T,fa as f,ga as h,ib as D,sb as j,ua as g,x as d,xb as x}from"./chunk-WQZFASF7.js";var l=(t,r)=>{let e=i(s),o=i(a);return e.isLoggedIn()?e.isExpired()?(e.logout(),alert("\u767B\u5165\u5DF2\u904E\u671F\uFF0C\u8ACB\u91CD\u65B0\u767B\u5165"),o.createUrlTree(["login"])):!0:(alert("\u5C1A\u672A\u767B\u5165"),o.createUrlTree(["login"]))};var F=(t,r)=>{let e=i(s),o=i(a);return e.isAuth()?o.createUrlTree(["manage","home"]):o.createUrlTree(["login"])};var O=[{path:"login",loadComponent:()=>import("./chunk-AF7NFIPZ.js").then(t=>t.Login)},{path:"manage",canActivate:[l],canActivateChild:[l],loadComponent:()=>import("./chunk-KAUNZEXE.js").then(t=>t.Manage),loadChildren:()=>import("./chunk-RRSCNE6P.js").then(t=>t.ManageRoutes)},{path:"",pathMatch:"full",canActivate:[F],loadComponent:()=>import("./chunk-AF7NFIPZ.js").then(t=>t.Login)},{path:"**",loadComponent:()=>import("./chunk-6GD6RCBT.js").then(t=>t.Notfound)}];var B=(t,r)=>{let o=i(s).token;return o&&(t=t.clone({headers:t.headers.set("Authorization","bearer "+o)})),r(t)};var G={providers:[f(),j({eventCoalescing:!0}),_(O),M(P([B]))]};function H(t,r){if(t&1&&(A(0,"span",0),R(1,"span",1),S()),t&2){let e=T();g(),D(e.status)}}var c=class t{constructor(r,e){this.cdr=r;this.router=e}status="start";show=!1;ngOnInit(){this.router.events.pipe(d(r=>r instanceof w)).subscribe(()=>{this.show=!0,this.status="p80"}),this.router.events.pipe(d(r=>r instanceof y)).subscribe(()=>{this.status="end",setTimeout(()=>{this.status="start",this.show=!1,this.cdr.markForCheck()},300),window.scrollTo(0,0)})}static \u0275fac=function(e){return new(e||t)(n(x),n(a))};static \u0275cmp=p({type:t,selectors:[["app-progress-bar"]],decls:1,vars:1,consts:[[1,"loader"],[1,"bar"]],template:function(e,o){e&1&&C(0,H,2,2,"span",0),e&2&&b(o.show?0:-1)},encapsulation:2})};var m=class t{constructor(r,e){this._renderer2=r;this._document=e}title=h("SINGTEX_WMS");ngOnInit(){}loadScripts(){this.addScript("/jquery-3.3.1.min.js"),this.addScript("/bootstrap-4.1.3.min.js"),this.addScript("/sb-admin-2/vendor/datatables/jquery.dataTables.min.js"),this.addScript("/sb-admin-2/vendor/datatables/dataTables.bootstrap4.min.js")}addScript(r){let e=this._renderer2.createElement("script");e.src=r,this._renderer2.appendChild(this._document.head,e)}static \u0275fac=function(e){return new(e||t)(n(v),n(u))};static \u0275cmp=p({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(e,o){e&1&&I(0,"app-progress-bar")(1,"router-outlet")},dependencies:[N,c],encapsulation:2})};E(m,G).catch(t=>console.error(t));
